<!-- Toolbar -->
<div class="toolbar" role="banner">
  <div class="upper-left-corner">
    <img
      width="40"
      alt="Bike"
      src="favicon.ico"
    />
    <span *ngFor="let tab of tabs"
          [class.active]="currentTab == tab.name"
          class="p-2 tab"
          (click)="changeTab(tab.name)">{{ tab.title }}</span>
  </div>
  <div *ngIf="currentTab == 'main'" class="upper-right-corner">
    <div class="spinner-container">
      <p *ngIf="lastUpdatedTime != ''; else spinner" class="last-updated-date">Last updated at {{ lastUpdatedTime }}</p>
    </div>
      <div class="spinner-container button-container">
      <button *ngIf="!loading; else spinner" class="btn btn-outline-light btn-refresh" (click)="triggerRefresh()">Refresh</button>
    </div>
  </div>
</div>

<div class="main">
  <div [ngSwitch]="currentTab">
    <div *ngSwitchCase="'main'">
      <main-map [$stations]="$stations" ($selectedStation)="changeSelectedStation($event)"></main-map>
      <main-side-panel [$selectedStation]="$selectedStation" [loading]="loading"></main-side-panel>
    </div>
    <div *ngSwitchCase="'stats'">
      <div class="d-flex justify-content-around timeslot-weekday-scroll">
        <div class="d-flex justify-content-around weekday-scroll">
          <select-scroll [values]="days" [startValueId]="currentDayNumber" (selectedValuesId$)="changeSelectedDay($event)"></select-scroll>
        </div>
        <div class="d-flex justify-content-around timeslot-scroll">
          <select-scroll [values]="timeslots" [startValueId]="currentTimeslotNumber" (selectedValuesId$)="changeSelectedTimeSlot($event)"></select-scroll>
        </div>
      </div>
      <main-map [$stations]="$stations" ($selectedStation)="changeSelectedStation($event)"></main-map>
    </div>
  </div>
  
  <!-- Footer -->
  <footer>
      Developped by CentraleSup√©lec students : Bouyssel Camille, Le Parc Jeanne, Ni Clara.
  </footer>

  <router-outlet></router-outlet>
</div>

<ng-template #spinner>
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</ng-template>
